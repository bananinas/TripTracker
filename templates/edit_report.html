<!DOCTYPE html>
<html>
<head>
  <title>Edit report</title>
  <link rel="stylesheet" href="/static/style.css">
</head>


<body>

  <p style="margin-bottom: 10px;">
  <a href="/">Home</a>
  {% if session.get('username') %}
    | <a href="/user/{{ session['username'] }}">My reports</a>
    | <a href="/new_report">Add report</a>
    | <a href="/logout">Logout</a>
  {% else %}
    | <a href="/login">Login</a>
    | <a href="/register">Register</a>
  {% endif %}
</p>
<hr>

<style>
  p {
    line-height: 1.2; /* smaller break between rows */
    margin: 4px 0;    /* smaller breaks between chapters */
  }
</style>

  <h1>Edit report</h1>

  {% if error %}
    <p style="color:red;">{{ error }}</p>
  {% endif %}

  <form method="post" action="/report/{{ report.id }}/update" enctype="multipart/form-data">

    <p>Country:<br>
      <input type="text" name="country"
             value="{{ request.form.country or report.country }}">
    </p>

    <p>Destination *<br>
      <input type="text" name="title" required
             value="{{ request.form.title or report.title }}">
    </p>

    <p>Description *<br>
     <textarea name="description" rows="8" cols="60" required>
  {{ request.form.description or report.description }}
</textarea>
    </p>

    <p>Travel date (MM/YYYY) *<br>
      <input type="text" name="travel_date" required placeholder="MM/YYYY"
             value="{{ request.form.travel_date or report.travel_date }}">
    </p>

      {% if holiday_types %}
    <p>Holiday type *<br>
      <select name="section" required>
        <option value="">(choose)</option>
        {% for h in holiday_types %}
          <option value="{{ h.value }}"
            {% if ((request.form.section or report.section)|lower) == (h.value|lower) %}selected{% endif %}>
            {{ h.value }}
          </option>
        {% endfor %}
      </select>
    </p>
  {% endif %}

  {% if themes %}
    <p>Theme *<br>
      <select name="theme" required>
        <option value="">(choose)</option>
        {% for t in themes %}
          <option value="{{ t.value }}"
            {% if ((request.form.theme or report.theme)|lower) == (t.value|lower) %}selected{% endif %}>
            {{ t.value }}
          </option>
        {% endfor %}
      </select>
    </p>
  {% endif %}



    {% if images %}
      <h4>Existing images</h4>
      <div>
        {% for img in images %}
          <img src="/uploads/{{ img.filename }}" style="max-width:150px; margin:5px;">
          <a href="/image/{{ img.id }}/delete"
            onclick="return confirm('Delete this image?');">Delete</a><br>
        {% endfor %}
      </div>
   {% endif %}

    <p>Add images (max 5):<br>
      <input type="file" name="images" multiple accept="image/*">
    </p>
    <p>
      <input type="reset" value="Clear selected files">
    </p>


    <input type="submit" value="Save changes">
  </form>

  <p><a href="/report/{{ report.id }}">Cancel</a></p>
</body>
</html>